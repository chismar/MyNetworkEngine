// ------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
// ------------------------------------------------------------------------------

using NetworkEngine;
using CodeGen;
using SFML.Graphics;
using SFML.System;
using SFML.Window;
using System;
using System.Threading.Tasks;
using LiteNetLib.Utils;
using System.Linq;
using System.Collections.Generic;
using Volatile;
using Definitions;
using SFML.Audio;

namespace Yogollag
{
}

namespace Yogollag
{
    [GeneratedClass]
    public partial class VisibilityEntitySync
    {
        override protected void SetDefsForComponents()
        {
        }

        override public void CallInitOnComponents()
        {
        }

        override public void CallCreateOnComponents()
        {
        }

        override public void CallDestroyOnComponents()
        {
        }
    }

    //obj VisibilityEntity generic  hasCustomSerialization false
    //debug info IEntityPropertyChanged,ITicked 2
    [GeneratedClass]
    public partial class VisibilityEntitySync : VisibilityEntity, IGhost
    {
        int _deltaMask;
        public void ClearSerialization()
        {
            _deltaMask = 0;
        }

        public void Deserialize(NetDataReader stream)
        {
            CheckStream(stream, 1950891584);
            //var hasAny = stream.GetBool();
            //if(!hasAny)
            //    return;
            var mask = stream.GetInt();
            OnAfterDeserialize();
        }

        public override void SetParentEntityRecursive()
        {
            base.SetParentEntityRecursive();
        }

        void OnPropChanged(int prop)
        {
            _deltaMask |= 1 << prop;
        }

        public bool Serialize(ref NetDataWriter stream, bool initial)
        {
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            SafeguardStream(stream, 1950891584);
            bool hasAny = false;
            int deltaMask = _deltaMask;
            if (initial)
                deltaMask = int.MaxValue;
            /*if(deltaMask == 0)
                    {
                        if(stream != null)
                            stream.Put(false);
                        return false;
                    }*/
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            //stream.Put(true);
            stream.Put(deltaMask);
            return hasAny;
        }
    }
}

namespace Yogollag
{
    [GeneratedClass]
    public partial class SessionEntitySync
    {
        override protected void SetDefsForComponents()
        {
        }

        override public void CallInitOnComponents()
        {
        }

        override public void CallCreateOnComponents()
        {
        }

        override public void CallDestroyOnComponents()
        {
        }
    }

    //obj SessionEntity generic  hasCustomSerialization false
    //debug info IEntityPropertyChanged 1
    [GeneratedClass]
    public partial class SessionEntitySync : SessionEntity, IGhost
    {
        int _deltaMask;
        public void ClearSerialization()
        {
            _deltaMask = 0;
        }

        public void Deserialize(NetDataReader stream)
        {
            CheckStream(stream, 853194026);
            //var hasAny = stream.GetBool();
            //if(!hasAny)
            //    return;
            var mask = stream.GetInt();
            OnAfterDeserialize();
        }

        public override void SetParentEntityRecursive()
        {
            base.SetParentEntityRecursive();
        }

        void OnPropChanged(int prop)
        {
            _deltaMask |= 1 << prop;
        }

        public bool Serialize(ref NetDataWriter stream, bool initial)
        {
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            SafeguardStream(stream, 853194026);
            bool hasAny = false;
            int deltaMask = _deltaMask;
            if (initial)
                deltaMask = int.MaxValue;
            /*if(deltaMask == 0)
                    {
                        if(stream != null)
                            stream.Put(false);
                        return false;
                    }*/
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            //stream.Put(true);
            stream.Put(deltaMask);
            return hasAny;
        }

        public override void Join(string name)
        {
            if (ParentEntity.IsCurrentlyExecuting)
            {
                base.Join(name);
            }
            else
            {
                CurrentServer.HandleEntityMessage(new SessionEntityJoinMessage()
                {EntityId = Id, name = name});
            }
        }
    }

    [GeneratedClass]
    public class SessionEntityJoinMessage : EntityMessage
    {
        public override int NetId => -1862147408;
        public string name;
        public override void Run(object entity)
        {
            ((SessionEntity)entity).Join(name);
        }
    }

    [GeneratedClass]
    public class SessionEntityJoinMessageSync : IGhostLikeSerializer
    {
        public object Deserialize(NetDataReader stream)
        {
            var messageToSerialize = new SessionEntityJoinMessage();
            {
                var has = stream.GetBool();
                messageToSerialize.EntityId = !has ? default : (EntityId)SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Deserialize(stream);
            }

            {
                messageToSerialize.name = stream.GetString();
            }

            return messageToSerialize;
        }

        public bool Serialize(object objToSerialize, ref NetDataWriter stream)
        {
            var messageToSerialize = (SessionEntityJoinMessage)objToSerialize;
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            {
                if (messageToSerialize.EntityId != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Serialize(messageToSerialize.EntityId, ref stream);
                }
                else
                {
                    stream.Put(false);
                }
            }

            {
                stream.Put(messageToSerialize.name);
            }

            return true;
        }
    }
}

namespace Yogollag
{
    [GeneratedClass]
    public partial class SampleComponentSync
    {
        override protected void SetDefsForComponents()
        {
        }

        override public void CallInitOnComponents()
        {
        }

        override public void CallCreateOnComponents()
        {
        }

        override public void CallDestroyOnComponents()
        {
        }
    }

    //obj SampleComponent generic  hasCustomSerialization false
    //debug info  0
    [GeneratedClass]
    public partial class SampleComponentSync : SampleComponent, IGhost
    {
        public override Vec2 Pos
        {
            get => base.Pos;
            set
            {
                base.Pos = value;
                OnPropChanged(0);
            }
        }

        public override Vec2 PrevPos
        {
            get => base.PrevPos;
            set
            {
                base.PrevPos = value;
                OnPropChanged(1);
            }
        }

        public override Int32 SyncId
        {
            get => base.SyncId;
            set
            {
                base.SyncId = value;
                OnPropChanged(2);
            }
        }

        int _deltaMask;
        public void ClearSerialization()
        {
            _deltaMask = 0;
        }

        public void Deserialize(NetDataReader stream)
        {
            CheckStream(stream, 1304733918);
            //var hasAny = stream.GetBool();
            //if(!hasAny)
            //    return;
            var mask = stream.GetInt();
            CheckStream(stream, 1268586827);
            if ((mask & (1 << 0)) != 0)
            {
                CheckStream(stream, 1268586827);
                var has = stream.GetBool();
                Pos = !has ? default : (Vec2)SyncTypesMap.FastSerializerGetter<Vec2>.Serializer.Deserialize(stream);
                CheckStream(stream, 1268586827);
            }

            CheckStream(stream, 357750914);
            if ((mask & (1 << 1)) != 0)
            {
                CheckStream(stream, 357750914);
                var has = stream.GetBool();
                PrevPos = !has ? default : (Vec2)SyncTypesMap.FastSerializerGetter<Vec2>.Serializer.Deserialize(stream);
                CheckStream(stream, 357750914);
            }

            CheckStream(stream, 389782966);
            if ((mask & (1 << 2)) != 0)
            {
                CheckStream(stream, 389782966);
                SyncId = stream.GetInt();
                CheckStream(stream, 389782966);
            }

            OnAfterDeserialize();
        }

        public override void SetParentEntityRecursive()
        {
            base.SetParentEntityRecursive();
        }

        void OnPropChanged(int prop)
        {
            _deltaMask |= 1 << prop;
        }

        public bool Serialize(ref NetDataWriter stream, bool initial)
        {
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            SafeguardStream(stream, 1304733918);
            bool hasAny = false;
            int deltaMask = _deltaMask;
            if (initial)
                deltaMask = int.MaxValue;
            /*if(deltaMask == 0)
                    {
                        if(stream != null)
                            stream.Put(false);
                        return false;
                    }*/
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            //stream.Put(true);
            stream.Put(deltaMask);
            SafeguardStream(stream, 1268586827);
            if ((deltaMask & (1 << 0)) != 0)
            {
                SafeguardStream(stream, 1268586827);
                hasAny = true;
                if (Pos != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<Vec2>.Serializer.Serialize(Pos, ref stream);
                }
                else
                {
                    stream.Put(false);
                }

                SafeguardStream(stream, 1268586827);
            }

            SafeguardStream(stream, 357750914);
            if ((deltaMask & (1 << 1)) != 0)
            {
                SafeguardStream(stream, 357750914);
                hasAny = true;
                if (PrevPos != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<Vec2>.Serializer.Serialize(PrevPos, ref stream);
                }
                else
                {
                    stream.Put(false);
                }

                SafeguardStream(stream, 357750914);
            }

            SafeguardStream(stream, 389782966);
            if ((deltaMask & (1 << 2)) != 0)
            {
                SafeguardStream(stream, 389782966);
                hasAny = true;
                stream.Put(SyncId);
                SafeguardStream(stream, 389782966);
            }

            return hasAny;
        }

        public override void HandlePos(Vec2 newPos)
        {
            if (ParentEntity.IsCurrentlyExecuting)
            {
                base.HandlePos(newPos);
            }
            else
            {
                CurrentServer.HandleEntityMessage(new SampleComponentHandlePosMessage()
                {EntityId = Id, newPos = newPos});
            }
        }
    }

    [GeneratedClass]
    public class SampleComponentHandlePosMessage : EntityMessage
    {
        public override int NetId => -2133236816;
        public Vec2 newPos;
        public override void Run(object entity)
        {
            ((SampleComponent)entity).HandlePos(newPos);
        }
    }

    [GeneratedClass]
    public class SampleComponentHandlePosMessageSync : IGhostLikeSerializer
    {
        public object Deserialize(NetDataReader stream)
        {
            var messageToSerialize = new SampleComponentHandlePosMessage();
            {
                var has = stream.GetBool();
                messageToSerialize.EntityId = !has ? default : (EntityId)SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Deserialize(stream);
            }

            {
                var has = stream.GetBool();
                messageToSerialize.newPos = !has ? default : (Vec2)SyncTypesMap.FastSerializerGetter<Vec2>.Serializer.Deserialize(stream);
            }

            return messageToSerialize;
        }

        public bool Serialize(object objToSerialize, ref NetDataWriter stream)
        {
            var messageToSerialize = (SampleComponentHandlePosMessage)objToSerialize;
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            {
                if (messageToSerialize.EntityId != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Serialize(messageToSerialize.EntityId, ref stream);
                }
                else
                {
                    stream.Put(false);
                }
            }

            {
                if (messageToSerialize.newPos != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<Vec2>.Serializer.Serialize(messageToSerialize.newPos, ref stream);
                }
                else
                {
                    stream.Put(false);
                }
            }

            return true;
        }
    }
}

namespace Yogollag
{
    [GeneratedClass]
    public partial class ItemSync
    {
        override protected void SetDefsForComponents()
        {
        }

        override public void CallInitOnComponents()
        {
        }

        override public void CallCreateOnComponents()
        {
        }

        override public void CallDestroyOnComponents()
        {
        }
    }

    //obj Item generic  hasCustomSerialization false
    //debug info IEntityObject 1
    [GeneratedClass]
    public partial class ItemSync : Item, IGhost
    {
        public override SpellId PassiveBuff
        {
            get => base.PassiveBuff;
            set
            {
                base.PassiveBuff = value;
                OnPropChanged(0);
            }
        }

        public override SpellId ActiveBuff
        {
            get => base.ActiveBuff;
            set
            {
                base.ActiveBuff = value;
                OnPropChanged(1);
            }
        }

        public override Int64 ItemId
        {
            get => base.ItemId;
            set
            {
                base.ItemId = value;
                OnPropChanged(2);
            }
        }

        public override ItemDef ItemDef
        {
            get => base.ItemDef;
            set
            {
                base.ItemDef = value;
                OnPropChanged(3);
            }
        }

        public override Int32 SyncId
        {
            get => base.SyncId;
            set
            {
                base.SyncId = value;
                OnPropChanged(4);
            }
        }

        int _deltaMask;
        public void ClearSerialization()
        {
            _deltaMask = 0;
        }

        public void Deserialize(NetDataReader stream)
        {
            CheckStream(stream, 784692533);
            //var hasAny = stream.GetBool();
            //if(!hasAny)
            //    return;
            var mask = stream.GetInt();
            CheckStream(stream, 1607741260);
            if ((mask & (1 << 0)) != 0)
            {
                CheckStream(stream, 1607741260);
                var has = stream.GetBool();
                PassiveBuff = !has ? default : (SpellId)SyncTypesMap.FastSerializerGetter<SpellId>.Serializer.Deserialize(stream);
                CheckStream(stream, 1607741260);
            }

            CheckStream(stream, 669687193);
            if ((mask & (1 << 1)) != 0)
            {
                CheckStream(stream, 669687193);
                var has = stream.GetBool();
                ActiveBuff = !has ? default : (SpellId)SyncTypesMap.FastSerializerGetter<SpellId>.Serializer.Deserialize(stream);
                CheckStream(stream, 669687193);
            }

            CheckStream(stream, 1411327358);
            if ((mask & (1 << 2)) != 0)
            {
                CheckStream(stream, 1411327358);
                ItemId = stream.GetLong();
                CheckStream(stream, 1411327358);
            }

            CheckStream(stream, 1778554922);
            if ((mask & (1 << 3)) != 0)
            {
                CheckStream(stream, 1778554922);
                var has = stream.GetBool();
                ItemDef = !has ? default : (ItemDef)SyncTypesMap.FastSerializerGetter<ItemDef>.Serializer.Deserialize(stream);
                CheckStream(stream, 1778554922);
            }

            CheckStream(stream, 389782966);
            if ((mask & (1 << 4)) != 0)
            {
                CheckStream(stream, 389782966);
                SyncId = stream.GetInt();
                CheckStream(stream, 389782966);
            }

            OnAfterDeserialize();
        }

        public override void SetParentEntityRecursive()
        {
            base.SetParentEntityRecursive();
        }

        void OnPropChanged(int prop)
        {
            _deltaMask |= 1 << prop;
        }

        public bool Serialize(ref NetDataWriter stream, bool initial)
        {
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            SafeguardStream(stream, 784692533);
            bool hasAny = false;
            int deltaMask = _deltaMask;
            if (initial)
                deltaMask = int.MaxValue;
            /*if(deltaMask == 0)
                    {
                        if(stream != null)
                            stream.Put(false);
                        return false;
                    }*/
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            //stream.Put(true);
            stream.Put(deltaMask);
            SafeguardStream(stream, 1607741260);
            if ((deltaMask & (1 << 0)) != 0)
            {
                SafeguardStream(stream, 1607741260);
                hasAny = true;
                if (PassiveBuff != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<SpellId>.Serializer.Serialize(PassiveBuff, ref stream);
                }
                else
                {
                    stream.Put(false);
                }

                SafeguardStream(stream, 1607741260);
            }

            SafeguardStream(stream, 669687193);
            if ((deltaMask & (1 << 1)) != 0)
            {
                SafeguardStream(stream, 669687193);
                hasAny = true;
                if (ActiveBuff != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<SpellId>.Serializer.Serialize(ActiveBuff, ref stream);
                }
                else
                {
                    stream.Put(false);
                }

                SafeguardStream(stream, 669687193);
            }

            SafeguardStream(stream, 1411327358);
            if ((deltaMask & (1 << 2)) != 0)
            {
                SafeguardStream(stream, 1411327358);
                hasAny = true;
                stream.Put(ItemId);
                SafeguardStream(stream, 1411327358);
            }

            SafeguardStream(stream, 1778554922);
            if ((deltaMask & (1 << 3)) != 0)
            {
                SafeguardStream(stream, 1778554922);
                hasAny = true;
                if (ItemDef != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<ItemDef>.Serializer.Serialize(ItemDef, ref stream);
                }
                else
                {
                    stream.Put(false);
                }

                SafeguardStream(stream, 1778554922);
            }

            SafeguardStream(stream, 389782966);
            if ((deltaMask & (1 << 4)) != 0)
            {
                SafeguardStream(stream, 389782966);
                hasAny = true;
                stream.Put(SyncId);
                SafeguardStream(stream, 389782966);
            }

            return hasAny;
        }
    }
}

namespace Yogollag
{
    [GeneratedClass]
    public partial class ItemsCollectionSync
    {
        override protected void SetDefsForComponents()
        {
        }

        override public void CallInitOnComponents()
        {
        }

        override public void CallCreateOnComponents()
        {
        }

        override public void CallDestroyOnComponents()
        {
        }
    }

    //obj ItemsCollection generic  hasCustomSerialization false
    //debug info  0
    [GeneratedClass]
    public partial class ItemsCollectionSync : ItemsCollection, IGhost
    {
        public override Int32 Size
        {
            get => base.Size;
            set
            {
                base.Size = value;
                OnPropChanged(0);
            }
        }

        public override Int64 Counter
        {
            get => base.Counter;
            set
            {
                base.Counter = value;
                OnPropChanged(1);
            }
        }

        public override DeltaList<Item> Items
        {
            get => base.Items;
            set
            {
                ((SyncObject)base.Items)?.SetParentEntity(null);
                base.Items = value;
                OnPropChanged(2);
                ((SyncObject)base.Items)?.SetParentEntity(ParentEntity);
            }
        }

        public override Int32 SyncId
        {
            get => base.SyncId;
            set
            {
                base.SyncId = value;
                OnPropChanged(3);
            }
        }

        int _deltaMask;
        public void ClearSerialization()
        {
            _deltaMask = 0;
            ((IGhost)Items)?.ClearSerialization();
        }

        public void Deserialize(NetDataReader stream)
        {
            CheckStream(stream, 1169461536);
            //var hasAny = stream.GetBool();
            //if(!hasAny)
            //    return;
            var mask = stream.GetInt();
            CheckStream(stream, 595753941);
            if ((mask & (1 << 0)) != 0)
            {
                CheckStream(stream, 595753941);
                Size = stream.GetInt();
                CheckStream(stream, 595753941);
            }

            CheckStream(stream, 507055057);
            if ((mask & (1 << 1)) != 0)
            {
                CheckStream(stream, 507055057);
                Counter = stream.GetLong();
                CheckStream(stream, 507055057);
            }

            CheckStream(stream, 476038431);
            if ((mask & (1 << 2)) != 0)
            {
                CheckStream(stream, 476038431);
                var nullOrNot = stream.GetByte();
                if (nullOrNot == 0)
                {
                    Items = null;
                }
                else
                {
                    var newVal = SyncObject.New<DeltaList<Item>>();
                    ((IGhost)newVal).Deserialize(stream);
                    Items = (DeltaList<Item>)newVal;
                }

                CheckStream(stream, 476038431);
            }
            else
            {
                CheckStream(stream, 476038431);
                ((IGhost)Items)?.Deserialize(stream);
                CheckStream(stream, 476038431);
            }

            CheckStream(stream, 389782966);
            if ((mask & (1 << 3)) != 0)
            {
                CheckStream(stream, 389782966);
                SyncId = stream.GetInt();
                CheckStream(stream, 389782966);
            }

            OnAfterDeserialize();
        }

        public override void SetParentEntityRecursive()
        {
            base.SetParentEntityRecursive();
            ((SyncObject)Items)?.SetParentEntity(this.ParentEntity);
        }

        void OnPropChanged(int prop)
        {
            _deltaMask |= 1 << prop;
        }

        public bool Serialize(ref NetDataWriter stream, bool initial)
        {
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            SafeguardStream(stream, 1169461536);
            bool hasAny = false;
            int deltaMask = _deltaMask;
            if (initial)
                deltaMask = int.MaxValue;
            /*if(deltaMask == 0)
                    {
                        if(stream != null)
                            stream.Put(false);
                        return false;
                    }*/
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            //stream.Put(true);
            stream.Put(deltaMask);
            SafeguardStream(stream, 595753941);
            if ((deltaMask & (1 << 0)) != 0)
            {
                SafeguardStream(stream, 595753941);
                hasAny = true;
                stream.Put(Size);
                SafeguardStream(stream, 595753941);
            }

            SafeguardStream(stream, 507055057);
            if ((deltaMask & (1 << 1)) != 0)
            {
                SafeguardStream(stream, 507055057);
                hasAny = true;
                stream.Put(Counter);
                SafeguardStream(stream, 507055057);
            }

            SafeguardStream(stream, 476038431);
            if ((deltaMask & (1 << 2)) != 0)
            {
                SafeguardStream(stream, 476038431);
                hasAny = true;
                if (Items == null)
                    stream.Put((byte)0);
                else
                {
                    stream.Put((byte)1);
                    ((IGhost)Items).Serialize(ref stream, true);
                }

                SafeguardStream(stream, 476038431);
            }
            else
            {
                SafeguardStream(stream, 476038431);
                hasAny |= ((IGhost)Items)?.Serialize(ref stream, initial) ?? false;
                SafeguardStream(stream, 476038431);
            }

            SafeguardStream(stream, 389782966);
            if ((deltaMask & (1 << 3)) != 0)
            {
                SafeguardStream(stream, 389782966);
                hasAny = true;
                stream.Put(SyncId);
                SafeguardStream(stream, 389782966);
            }

            return hasAny;
        }

        public override void MakeActive(long itemId)
        {
            if (ParentEntity.IsCurrentlyExecuting)
            {
                base.MakeActive(itemId);
            }
            else
            {
                CurrentServer.HandleEntityMessage(new ItemsCollectionMakeActiveMessage()
                {EntityId = Id, itemId = itemId});
            }
        }

        public override void MakeInactive(long itemId)
        {
            if (ParentEntity.IsCurrentlyExecuting)
            {
                base.MakeInactive(itemId);
            }
            else
            {
                CurrentServer.HandleEntityMessage(new ItemsCollectionMakeInactiveMessage()
                {EntityId = Id, itemId = itemId});
            }
        }

        public override void DropItem(Item item)
        {
            if (ParentEntity.IsCurrentlyExecuting)
            {
                base.DropItem(item);
            }
            else
            {
                CurrentServer.HandleEntityMessage(new ItemsCollectionDropItemMessage()
                {EntityId = Id, item = item});
            }
        }

        public override void AddItem(Item item)
        {
            if (ParentEntity.IsCurrentlyExecuting)
            {
                base.AddItem(item);
            }
            else
            {
                CurrentServer.HandleEntityMessage(new ItemsCollectionAddItemMessage()
                {EntityId = Id, item = item});
            }
        }

        public override void RemoveItem(long itemId)
        {
            if (ParentEntity.IsCurrentlyExecuting)
            {
                base.RemoveItem(itemId);
            }
            else
            {
                CurrentServer.HandleEntityMessage(new ItemsCollectionRemoveItemMessage()
                {EntityId = Id, itemId = itemId});
            }
        }

        public override void MoveItem(long itemId, int slot)
        {
            if (ParentEntity.IsCurrentlyExecuting)
            {
                base.MoveItem(itemId, slot);
            }
            else
            {
                CurrentServer.HandleEntityMessage(new ItemsCollectionMoveItemMessage()
                {EntityId = Id, itemId = itemId, slot = slot});
            }
        }
    }

    [GeneratedClass]
    public class ItemsCollectionMakeActiveMessage : EntityMessage
    {
        public override int NetId => 1123777748;
        public long itemId;
        public override void Run(object entity)
        {
            ((ItemsCollection)entity).MakeActive(itemId);
        }
    }

    [GeneratedClass]
    public class ItemsCollectionMakeActiveMessageSync : IGhostLikeSerializer
    {
        public object Deserialize(NetDataReader stream)
        {
            var messageToSerialize = new ItemsCollectionMakeActiveMessage();
            {
                var has = stream.GetBool();
                messageToSerialize.EntityId = !has ? default : (EntityId)SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Deserialize(stream);
            }

            {
                messageToSerialize.itemId = stream.GetLong();
            }

            return messageToSerialize;
        }

        public bool Serialize(object objToSerialize, ref NetDataWriter stream)
        {
            var messageToSerialize = (ItemsCollectionMakeActiveMessage)objToSerialize;
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            {
                if (messageToSerialize.EntityId != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Serialize(messageToSerialize.EntityId, ref stream);
                }
                else
                {
                    stream.Put(false);
                }
            }

            {
                stream.Put(messageToSerialize.itemId);
            }

            return true;
        }
    }

    [GeneratedClass]
    public class ItemsCollectionMakeInactiveMessage : EntityMessage
    {
        public override int NetId => 341339912;
        public long itemId;
        public override void Run(object entity)
        {
            ((ItemsCollection)entity).MakeInactive(itemId);
        }
    }

    [GeneratedClass]
    public class ItemsCollectionMakeInactiveMessageSync : IGhostLikeSerializer
    {
        public object Deserialize(NetDataReader stream)
        {
            var messageToSerialize = new ItemsCollectionMakeInactiveMessage();
            {
                var has = stream.GetBool();
                messageToSerialize.EntityId = !has ? default : (EntityId)SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Deserialize(stream);
            }

            {
                messageToSerialize.itemId = stream.GetLong();
            }

            return messageToSerialize;
        }

        public bool Serialize(object objToSerialize, ref NetDataWriter stream)
        {
            var messageToSerialize = (ItemsCollectionMakeInactiveMessage)objToSerialize;
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            {
                if (messageToSerialize.EntityId != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Serialize(messageToSerialize.EntityId, ref stream);
                }
                else
                {
                    stream.Put(false);
                }
            }

            {
                stream.Put(messageToSerialize.itemId);
            }

            return true;
        }
    }

    [GeneratedClass]
    public class ItemsCollectionDropItemMessage : EntityMessage
    {
        public override int NetId => 757759193;
        public Item item;
        public override void Run(object entity)
        {
            ((ItemsCollection)entity).DropItem(item);
        }
    }

    [GeneratedClass]
    public class ItemsCollectionDropItemMessageSync : IGhostLikeSerializer
    {
        public object Deserialize(NetDataReader stream)
        {
            var messageToSerialize = new ItemsCollectionDropItemMessage();
            {
                var has = stream.GetBool();
                messageToSerialize.EntityId = !has ? default : (EntityId)SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Deserialize(stream);
            }

            {
                var nullOrNot = stream.GetByte();
                if (nullOrNot == 0)
                {
                    messageToSerialize.item = null;
                }
                else
                {
                    var newVal = Activator.CreateInstance(SyncTypesMap.GetSyncTypeFromId(stream.GetInt()));
                    ((IGhost)newVal).Deserialize(stream);
                    messageToSerialize.item = (Item)newVal;
                }
            }

            return messageToSerialize;
        }

        public bool Serialize(object objToSerialize, ref NetDataWriter stream)
        {
            var messageToSerialize = (ItemsCollectionDropItemMessage)objToSerialize;
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            {
                if (messageToSerialize.EntityId != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Serialize(messageToSerialize.EntityId, ref stream);
                }
                else
                {
                    stream.Put(false);
                }
            }

            {
                if (messageToSerialize.item == null)
                    stream.Put((byte)0);
                else
                {
                    stream.Put((byte)1);
                    stream.Put(SyncTypesMap.GetIdFromSyncType(messageToSerialize.item.GetType()));
                    ((IGhost)messageToSerialize.item).Serialize(ref stream, true);
                }
            }

            return true;
        }
    }

    [GeneratedClass]
    public class ItemsCollectionAddItemMessage : EntityMessage
    {
        public override int NetId => 124255062;
        public Item item;
        public override void Run(object entity)
        {
            ((ItemsCollection)entity).AddItem(item);
        }
    }

    [GeneratedClass]
    public class ItemsCollectionAddItemMessageSync : IGhostLikeSerializer
    {
        public object Deserialize(NetDataReader stream)
        {
            var messageToSerialize = new ItemsCollectionAddItemMessage();
            {
                var has = stream.GetBool();
                messageToSerialize.EntityId = !has ? default : (EntityId)SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Deserialize(stream);
            }

            {
                var nullOrNot = stream.GetByte();
                if (nullOrNot == 0)
                {
                    messageToSerialize.item = null;
                }
                else
                {
                    var newVal = Activator.CreateInstance(SyncTypesMap.GetSyncTypeFromId(stream.GetInt()));
                    ((IGhost)newVal).Deserialize(stream);
                    messageToSerialize.item = (Item)newVal;
                }
            }

            return messageToSerialize;
        }

        public bool Serialize(object objToSerialize, ref NetDataWriter stream)
        {
            var messageToSerialize = (ItemsCollectionAddItemMessage)objToSerialize;
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            {
                if (messageToSerialize.EntityId != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Serialize(messageToSerialize.EntityId, ref stream);
                }
                else
                {
                    stream.Put(false);
                }
            }

            {
                if (messageToSerialize.item == null)
                    stream.Put((byte)0);
                else
                {
                    stream.Put((byte)1);
                    stream.Put(SyncTypesMap.GetIdFromSyncType(messageToSerialize.item.GetType()));
                    ((IGhost)messageToSerialize.item).Serialize(ref stream, true);
                }
            }

            return true;
        }
    }

    [GeneratedClass]
    public class ItemsCollectionRemoveItemMessage : EntityMessage
    {
        public override int NetId => -245823468;
        public long itemId;
        public override void Run(object entity)
        {
            ((ItemsCollection)entity).RemoveItem(itemId);
        }
    }

    [GeneratedClass]
    public class ItemsCollectionRemoveItemMessageSync : IGhostLikeSerializer
    {
        public object Deserialize(NetDataReader stream)
        {
            var messageToSerialize = new ItemsCollectionRemoveItemMessage();
            {
                var has = stream.GetBool();
                messageToSerialize.EntityId = !has ? default : (EntityId)SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Deserialize(stream);
            }

            {
                messageToSerialize.itemId = stream.GetLong();
            }

            return messageToSerialize;
        }

        public bool Serialize(object objToSerialize, ref NetDataWriter stream)
        {
            var messageToSerialize = (ItemsCollectionRemoveItemMessage)objToSerialize;
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            {
                if (messageToSerialize.EntityId != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Serialize(messageToSerialize.EntityId, ref stream);
                }
                else
                {
                    stream.Put(false);
                }
            }

            {
                stream.Put(messageToSerialize.itemId);
            }

            return true;
        }
    }

    [GeneratedClass]
    public class ItemsCollectionMoveItemMessage : EntityMessage
    {
        public override int NetId => -1964212697;
        public long itemId;
        public int slot;
        public override void Run(object entity)
        {
            ((ItemsCollection)entity).MoveItem(itemId, slot);
        }
    }

    [GeneratedClass]
    public class ItemsCollectionMoveItemMessageSync : IGhostLikeSerializer
    {
        public object Deserialize(NetDataReader stream)
        {
            var messageToSerialize = new ItemsCollectionMoveItemMessage();
            {
                var has = stream.GetBool();
                messageToSerialize.EntityId = !has ? default : (EntityId)SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Deserialize(stream);
            }

            {
                messageToSerialize.itemId = stream.GetLong();
            }

            {
                messageToSerialize.slot = stream.GetInt();
            }

            return messageToSerialize;
        }

        public bool Serialize(object objToSerialize, ref NetDataWriter stream)
        {
            var messageToSerialize = (ItemsCollectionMoveItemMessage)objToSerialize;
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            {
                if (messageToSerialize.EntityId != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Serialize(messageToSerialize.EntityId, ref stream);
                }
                else
                {
                    stream.Put(false);
                }
            }

            {
                stream.Put(messageToSerialize.itemId);
            }

            {
                stream.Put(messageToSerialize.slot);
            }

            return true;
        }
    }
}

namespace Yogollag
{
    [GeneratedClass]
    public class CharacterEntitySceneDef : BaseDef, ISceneDef
    {
        public DefRef<IEntityObjectDef> Object
        {
            get;
            set;
        }

        public Single Rotation
        {
            get;
            set;
        }

        = default;
        public Vec2 Position
        {
            get;
            set;
        }

        = default;
        public DefRef<SpriteRendererSceneDef> _spriteRenderer
        {
            get;
            set;
        }

        = default;
        public DefRef<SpellsEngineSceneDef> SpellsEngine
        {
            get;
            set;
        }

        = default;
        public DefRef<CombatEngineSceneDef> CombatEngine
        {
            get;
            set;
        }

        = default;
        public DefRef<ActionEngineSceneDef> ActionEngine
        {
            get;
            set;
        }

        = default;
        public DefRef<StatsEngineSceneDef> StatsEngine
        {
            get;
            set;
        }

        = default;
        public DefRef<FxEngineSceneDef> FxEngine
        {
            get;
            set;
        }

        = default;
    }

    [GeneratedClass]
    public class CharacterEntityDef : BaseDef, IEntityObjectDef
    {
        public DefRef<LocoMoverDef> LocoMoverDef
        {
            get;
            set;
        }

        = default;
        public DefRef<SpriteRendererDef> _spriteRenderer
        {
            get;
            set;
        }

        = default;
        public DefRef<SpellsEngineDef> SpellsEngine
        {
            get;
            set;
        }

        = default;
        public DefRef<CombatEngineDef> CombatEngine
        {
            get;
            set;
        }

        = default;
        public DefRef<ActionEngineDef> ActionEngine
        {
            get;
            set;
        }

        = default;
        public DefRef<StatsEngineDef> StatsEngine
        {
            get;
            set;
        }

        = default;
        public DefRef<FxEngineDef> FxEngine
        {
            get;
            set;
        }

        = default;
    }

    [GeneratedClass]
    public partial class CharacterEntitySync
    {
        public override LocoMoverDef LocoMoverDef
        {
            get => ((CharacterEntityDef)Def).LocoMoverDef.Def;
        }

        override protected void SetDefsForComponents()
        {
            _spriteRenderer.Def = (IDef)((CharacterEntityDef)Def)?._spriteRenderer.Def;
            SpellsEngine.Def = (IDef)((CharacterEntityDef)Def)?.SpellsEngine.Def;
            CombatEngine.Def = (IDef)((CharacterEntityDef)Def)?.CombatEngine.Def;
            ActionEngine.Def = (IDef)((CharacterEntityDef)Def)?.ActionEngine.Def;
            StatsEngine.Def = (IDef)((CharacterEntityDef)Def)?.StatsEngine.Def;
            FxEngine.Def = (IDef)((CharacterEntityDef)Def)?.FxEngine.Def;
        }

        override public void CallInitOnComponents()
        {
            _spriteRenderer.Init();
            SpellsEngine.Init();
            CombatEngine.Init();
            ActionEngine.Init();
            StatsEngine.Init();
            FxEngine.Init();
        }

        override public void CallCreateOnComponents()
        {
            _spriteRenderer.Create();
            SpellsEngine.Create();
            CombatEngine.Create();
            ActionEngine.Create();
            StatsEngine.Create();
            FxEngine.Create();
        }

        override public void CallDestroyOnComponents()
        {
            _spriteRenderer.Destroy();
            SpellsEngine.Destroy();
            CombatEngine.Destroy();
            ActionEngine.Destroy();
            StatsEngine.Destroy();
            FxEngine.Destroy();
        }
    }

    //obj CharacterEntity generic  hasCustomSerialization false
    //debug info IEntityPropertyChanged,ICharacterLikeMovement,IRenderable,IPositionedEntity,IHasFxEngine,IStatEntity,IImpactedEntity,IQuester,IHasInventory,IEntityObject,ITicked,IHasSpells,IHasActionEngine,IHasCombatEngine,IHasLocoMover,IHasMortalEngine 16
    [GeneratedClass]
    public partial class CharacterEntitySync : CharacterEntity, IGhost
    {
        public override Single Rotation
        {
            get => base.Rotation;
            set
            {
                base.Rotation = value;
                OnPropChanged(0);
            }
        }

        public override Int64 ActiveItemId
        {
            get => base.ActiveItemId;
            set
            {
                base.ActiveItemId = value;
                OnPropChanged(1);
            }
        }

        public override RoleDef SecretRole
        {
            get => base.SecretRole;
            set
            {
                base.SecretRole = value;
                OnPropChanged(2);
            }
        }

        public override RoleDef Job
        {
            get => base.Job;
            set
            {
                base.Job = value;
                OnPropChanged(3);
            }
        }

        public override SpellsEngine SpellsEngine
        {
            get => base.SpellsEngine;
            set
            {
                ((SyncObject)base.SpellsEngine)?.SetParentEntity(null);
                base.SpellsEngine = value;
                OnPropChanged(4);
                ((SyncObject)base.SpellsEngine)?.SetParentEntity(ParentEntity);
            }
        }

        public override SampleComponent Cmp
        {
            get => base.Cmp;
            set
            {
                ((SyncObject)base.Cmp)?.SetParentEntity(null);
                base.Cmp = value;
                OnPropChanged(5);
                ((SyncObject)base.Cmp)?.SetParentEntity(ParentEntity);
            }
        }

        public override CombatEngine CombatEngine
        {
            get => base.CombatEngine;
            set
            {
                ((SyncObject)base.CombatEngine)?.SetParentEntity(null);
                base.CombatEngine = value;
                OnPropChanged(6);
                ((SyncObject)base.CombatEngine)?.SetParentEntity(ParentEntity);
            }
        }

        public override ActionEngine ActionEngine
        {
            get => base.ActionEngine;
            set
            {
                ((SyncObject)base.ActionEngine)?.SetParentEntity(null);
                base.ActionEngine = value;
                OnPropChanged(7);
                ((SyncObject)base.ActionEngine)?.SetParentEntity(ParentEntity);
            }
        }

        public override String Name
        {
            get => base.Name;
            set
            {
                base.Name = value;
                OnPropChanged(8);
            }
        }

        public override Vec2 Position
        {
            get => base.Position;
            set
            {
                base.Position = value;
                OnPropChanged(9);
            }
        }

        public override Single Speed
        {
            get => base.Speed;
            set
            {
                base.Speed = value;
                OnPropChanged(10);
            }
        }

        public override StatsEngine StatsEngine
        {
            get => base.StatsEngine;
            set
            {
                ((SyncObject)base.StatsEngine)?.SetParentEntity(null);
                base.StatsEngine = value;
                OnPropChanged(11);
                ((SyncObject)base.StatsEngine)?.SetParentEntity(ParentEntity);
            }
        }

        public override ItemsCollection Inventory
        {
            get => base.Inventory;
            set
            {
                ((SyncObject)base.Inventory)?.SetParentEntity(null);
                base.Inventory = value;
                OnPropChanged(12);
                ((SyncObject)base.Inventory)?.SetParentEntity(ParentEntity);
            }
        }

        public override IEntityObjectDef Def
        {
            get => base.Def;
            set
            {
                base.Def = value;
                OnPropChanged(13);
            }
        }

        public override MortalEngine Mortal
        {
            get => base.Mortal;
            set
            {
                ((SyncObject)base.Mortal)?.SetParentEntity(null);
                base.Mortal = value;
                OnPropChanged(14);
                ((SyncObject)base.Mortal)?.SetParentEntity(ParentEntity);
            }
        }

        public override FxEngine FxEngine
        {
            get => base.FxEngine;
            set
            {
                ((SyncObject)base.FxEngine)?.SetParentEntity(null);
                base.FxEngine = value;
                OnPropChanged(15);
                ((SyncObject)base.FxEngine)?.SetParentEntity(ParentEntity);
            }
        }

        public override void InitFromSceneDef(BaseDef def)
        {
            var selfDef = (CharacterEntitySceneDef)def;
            _spriteRenderer.InitFromSceneDef(selfDef._spriteRenderer.Def);
            SpellsEngine.InitFromSceneDef(selfDef.SpellsEngine.Def);
            CombatEngine.InitFromSceneDef(selfDef.CombatEngine.Def);
            ActionEngine.InitFromSceneDef(selfDef.ActionEngine.Def);
            StatsEngine.InitFromSceneDef(selfDef.StatsEngine.Def);
            FxEngine.InitFromSceneDef(selfDef.FxEngine.Def);
            Rotation = selfDef.Rotation;
            Position = selfDef.Position;
        }

        int _deltaMask;
        public void ClearSerialization()
        {
            _deltaMask = 0;
            ((IGhost)SpellsEngine)?.ClearSerialization();
            ((IGhost)Cmp)?.ClearSerialization();
            ((IGhost)CombatEngine)?.ClearSerialization();
            ((IGhost)ActionEngine)?.ClearSerialization();
            ((IGhost)StatsEngine)?.ClearSerialization();
            ((IGhost)Inventory)?.ClearSerialization();
            ((IGhost)Mortal)?.ClearSerialization();
            ((IGhost)FxEngine)?.ClearSerialization();
        }

        public void Deserialize(NetDataReader stream)
        {
            CheckStream(stream, 77831613);
            //var hasAny = stream.GetBool();
            //if(!hasAny)
            //    return;
            var mask = stream.GetInt();
            CheckStream(stream, 1463612130);
            if ((mask & (1 << 0)) != 0)
            {
                CheckStream(stream, 1463612130);
                Rotation = stream.GetFloat();
                CheckStream(stream, 1463612130);
            }

            CheckStream(stream, 202878813);
            if ((mask & (1 << 1)) != 0)
            {
                CheckStream(stream, 202878813);
                ActiveItemId = stream.GetLong();
                CheckStream(stream, 202878813);
            }

            CheckStream(stream, 1696918971);
            if ((mask & (1 << 2)) != 0)
            {
                CheckStream(stream, 1696918971);
                var has = stream.GetBool();
                SecretRole = !has ? default : (RoleDef)SyncTypesMap.FastSerializerGetter<RoleDef>.Serializer.Deserialize(stream);
                CheckStream(stream, 1696918971);
            }

            CheckStream(stream, 1026055047);
            if ((mask & (1 << 3)) != 0)
            {
                CheckStream(stream, 1026055047);
                var has = stream.GetBool();
                Job = !has ? default : (RoleDef)SyncTypesMap.FastSerializerGetter<RoleDef>.Serializer.Deserialize(stream);
                CheckStream(stream, 1026055047);
            }

            CheckStream(stream, 1226050574);
            if ((mask & (1 << 4)) != 0)
            {
                CheckStream(stream, 1226050574);
                var nullOrNot = stream.GetByte();
                if (nullOrNot == 0)
                {
                    SpellsEngine = null;
                }
                else
                {
                    var newVal = Activator.CreateInstance(SyncTypesMap.GetSyncTypeFromId(stream.GetInt()));
                    ((IGhost)newVal).Deserialize(stream);
                    SpellsEngine = (SpellsEngine)newVal;
                }

                CheckStream(stream, 1226050574);
            }
            else
            {
                CheckStream(stream, 1226050574);
                ((IGhost)SpellsEngine)?.Deserialize(stream);
                CheckStream(stream, 1226050574);
            }

            CheckStream(stream, 1572212244);
            if ((mask & (1 << 5)) != 0)
            {
                CheckStream(stream, 1572212244);
                var nullOrNot = stream.GetByte();
                if (nullOrNot == 0)
                {
                    Cmp = null;
                }
                else
                {
                    var newVal = Activator.CreateInstance(SyncTypesMap.GetSyncTypeFromId(stream.GetInt()));
                    ((IGhost)newVal).Deserialize(stream);
                    Cmp = (SampleComponent)newVal;
                }

                CheckStream(stream, 1572212244);
            }
            else
            {
                CheckStream(stream, 1572212244);
                ((IGhost)Cmp)?.Deserialize(stream);
                CheckStream(stream, 1572212244);
            }

            CheckStream(stream, 931858589);
            if ((mask & (1 << 6)) != 0)
            {
                CheckStream(stream, 931858589);
                var nullOrNot = stream.GetByte();
                if (nullOrNot == 0)
                {
                    CombatEngine = null;
                }
                else
                {
                    var newVal = Activator.CreateInstance(SyncTypesMap.GetSyncTypeFromId(stream.GetInt()));
                    ((IGhost)newVal).Deserialize(stream);
                    CombatEngine = (CombatEngine)newVal;
                }

                CheckStream(stream, 931858589);
            }
            else
            {
                CheckStream(stream, 931858589);
                ((IGhost)CombatEngine)?.Deserialize(stream);
                CheckStream(stream, 931858589);
            }

            CheckStream(stream, 784278248);
            if ((mask & (1 << 7)) != 0)
            {
                CheckStream(stream, 784278248);
                var nullOrNot = stream.GetByte();
                if (nullOrNot == 0)
                {
                    ActionEngine = null;
                }
                else
                {
                    var newVal = Activator.CreateInstance(SyncTypesMap.GetSyncTypeFromId(stream.GetInt()));
                    ((IGhost)newVal).Deserialize(stream);
                    ActionEngine = (ActionEngine)newVal;
                }

                CheckStream(stream, 784278248);
            }
            else
            {
                CheckStream(stream, 784278248);
                ((IGhost)ActionEngine)?.Deserialize(stream);
                CheckStream(stream, 784278248);
            }

            CheckStream(stream, 411153716);
            if ((mask & (1 << 8)) != 0)
            {
                CheckStream(stream, 411153716);
                Name = stream.GetString();
                CheckStream(stream, 411153716);
            }

            CheckStream(stream, 137289609);
            if ((mask & (1 << 9)) != 0)
            {
                CheckStream(stream, 137289609);
                var has = stream.GetBool();
                Position = !has ? default : (Vec2)SyncTypesMap.FastSerializerGetter<Vec2>.Serializer.Deserialize(stream);
                CheckStream(stream, 137289609);
            }

            CheckStream(stream, 1119698508);
            if ((mask & (1 << 10)) != 0)
            {
                CheckStream(stream, 1119698508);
                Speed = stream.GetFloat();
                CheckStream(stream, 1119698508);
            }

            CheckStream(stream, 778848401);
            if ((mask & (1 << 11)) != 0)
            {
                CheckStream(stream, 778848401);
                var nullOrNot = stream.GetByte();
                if (nullOrNot == 0)
                {
                    StatsEngine = null;
                }
                else
                {
                    var newVal = Activator.CreateInstance(SyncTypesMap.GetSyncTypeFromId(stream.GetInt()));
                    ((IGhost)newVal).Deserialize(stream);
                    StatsEngine = (StatsEngine)newVal;
                }

                CheckStream(stream, 778848401);
            }
            else
            {
                CheckStream(stream, 778848401);
                ((IGhost)StatsEngine)?.Deserialize(stream);
                CheckStream(stream, 778848401);
            }

            CheckStream(stream, 1498576082);
            if ((mask & (1 << 12)) != 0)
            {
                CheckStream(stream, 1498576082);
                var nullOrNot = stream.GetByte();
                if (nullOrNot == 0)
                {
                    Inventory = null;
                }
                else
                {
                    var newVal = Activator.CreateInstance(SyncTypesMap.GetSyncTypeFromId(stream.GetInt()));
                    ((IGhost)newVal).Deserialize(stream);
                    Inventory = (ItemsCollection)newVal;
                }

                CheckStream(stream, 1498576082);
            }
            else
            {
                CheckStream(stream, 1498576082);
                ((IGhost)Inventory)?.Deserialize(stream);
                CheckStream(stream, 1498576082);
            }

            CheckStream(stream, 142474984);
            if ((mask & (1 << 13)) != 0)
            {
                CheckStream(stream, 142474984);
                var has = stream.GetBool();
                Def = !has ? default : (IEntityObjectDef)SyncTypesMap.FastSerializerGetter<IEntityObjectDef>.Serializer.Deserialize(stream);
                CheckStream(stream, 142474984);
            }

            CheckStream(stream, 1485461930);
            if ((mask & (1 << 14)) != 0)
            {
                CheckStream(stream, 1485461930);
                var nullOrNot = stream.GetByte();
                if (nullOrNot == 0)
                {
                    Mortal = null;
                }
                else
                {
                    var newVal = Activator.CreateInstance(SyncTypesMap.GetSyncTypeFromId(stream.GetInt()));
                    ((IGhost)newVal).Deserialize(stream);
                    Mortal = (MortalEngine)newVal;
                }

                CheckStream(stream, 1485461930);
            }
            else
            {
                CheckStream(stream, 1485461930);
                ((IGhost)Mortal)?.Deserialize(stream);
                CheckStream(stream, 1485461930);
            }

            CheckStream(stream, 1277672612);
            if ((mask & (1 << 15)) != 0)
            {
                CheckStream(stream, 1277672612);
                var nullOrNot = stream.GetByte();
                if (nullOrNot == 0)
                {
                    FxEngine = null;
                }
                else
                {
                    var newVal = Activator.CreateInstance(SyncTypesMap.GetSyncTypeFromId(stream.GetInt()));
                    ((IGhost)newVal).Deserialize(stream);
                    FxEngine = (FxEngine)newVal;
                }

                CheckStream(stream, 1277672612);
            }
            else
            {
                CheckStream(stream, 1277672612);
                ((IGhost)FxEngine)?.Deserialize(stream);
                CheckStream(stream, 1277672612);
            }

            OnAfterDeserialize();
        }

        public override void SetParentEntityRecursive()
        {
            base.SetParentEntityRecursive();
            ((SyncObject)SpellsEngine)?.SetParentEntity(this.ParentEntity);
            ((SyncObject)Cmp)?.SetParentEntity(this.ParentEntity);
            ((SyncObject)CombatEngine)?.SetParentEntity(this.ParentEntity);
            ((SyncObject)ActionEngine)?.SetParentEntity(this.ParentEntity);
            ((SyncObject)StatsEngine)?.SetParentEntity(this.ParentEntity);
            ((SyncObject)Inventory)?.SetParentEntity(this.ParentEntity);
            ((SyncObject)Mortal)?.SetParentEntity(this.ParentEntity);
            ((SyncObject)FxEngine)?.SetParentEntity(this.ParentEntity);
        }

        void OnPropChanged(int prop)
        {
            _deltaMask |= 1 << prop;
        }

        public bool Serialize(ref NetDataWriter stream, bool initial)
        {
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            SafeguardStream(stream, 77831613);
            bool hasAny = false;
            int deltaMask = _deltaMask;
            if (initial)
                deltaMask = int.MaxValue;
            /*if(deltaMask == 0)
                    {
                        if(stream != null)
                            stream.Put(false);
                        return false;
                    }*/
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            //stream.Put(true);
            stream.Put(deltaMask);
            SafeguardStream(stream, 1463612130);
            if ((deltaMask & (1 << 0)) != 0)
            {
                SafeguardStream(stream, 1463612130);
                hasAny = true;
                stream.Put(Rotation);
                SafeguardStream(stream, 1463612130);
            }

            SafeguardStream(stream, 202878813);
            if ((deltaMask & (1 << 1)) != 0)
            {
                SafeguardStream(stream, 202878813);
                hasAny = true;
                stream.Put(ActiveItemId);
                SafeguardStream(stream, 202878813);
            }

            SafeguardStream(stream, 1696918971);
            if ((deltaMask & (1 << 2)) != 0)
            {
                SafeguardStream(stream, 1696918971);
                hasAny = true;
                if (SecretRole != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<RoleDef>.Serializer.Serialize(SecretRole, ref stream);
                }
                else
                {
                    stream.Put(false);
                }

                SafeguardStream(stream, 1696918971);
            }

            SafeguardStream(stream, 1026055047);
            if ((deltaMask & (1 << 3)) != 0)
            {
                SafeguardStream(stream, 1026055047);
                hasAny = true;
                if (Job != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<RoleDef>.Serializer.Serialize(Job, ref stream);
                }
                else
                {
                    stream.Put(false);
                }

                SafeguardStream(stream, 1026055047);
            }

            SafeguardStream(stream, 1226050574);
            if ((deltaMask & (1 << 4)) != 0)
            {
                SafeguardStream(stream, 1226050574);
                hasAny = true;
                if (SpellsEngine == null)
                    stream.Put((byte)0);
                else
                {
                    stream.Put((byte)1);
                    stream.Put(SyncTypesMap.GetIdFromSyncType(SpellsEngine.GetType()));
                    ((IGhost)SpellsEngine).Serialize(ref stream, true);
                }

                SafeguardStream(stream, 1226050574);
            }
            else
            {
                SafeguardStream(stream, 1226050574);
                hasAny |= ((IGhost)SpellsEngine)?.Serialize(ref stream, initial) ?? false;
                SafeguardStream(stream, 1226050574);
            }

            SafeguardStream(stream, 1572212244);
            if ((deltaMask & (1 << 5)) != 0)
            {
                SafeguardStream(stream, 1572212244);
                hasAny = true;
                if (Cmp == null)
                    stream.Put((byte)0);
                else
                {
                    stream.Put((byte)1);
                    stream.Put(SyncTypesMap.GetIdFromSyncType(Cmp.GetType()));
                    ((IGhost)Cmp).Serialize(ref stream, true);
                }

                SafeguardStream(stream, 1572212244);
            }
            else
            {
                SafeguardStream(stream, 1572212244);
                hasAny |= ((IGhost)Cmp)?.Serialize(ref stream, initial) ?? false;
                SafeguardStream(stream, 1572212244);
            }

            SafeguardStream(stream, 931858589);
            if ((deltaMask & (1 << 6)) != 0)
            {
                SafeguardStream(stream, 931858589);
                hasAny = true;
                if (CombatEngine == null)
                    stream.Put((byte)0);
                else
                {
                    stream.Put((byte)1);
                    stream.Put(SyncTypesMap.GetIdFromSyncType(CombatEngine.GetType()));
                    ((IGhost)CombatEngine).Serialize(ref stream, true);
                }

                SafeguardStream(stream, 931858589);
            }
            else
            {
                SafeguardStream(stream, 931858589);
                hasAny |= ((IGhost)CombatEngine)?.Serialize(ref stream, initial) ?? false;
                SafeguardStream(stream, 931858589);
            }

            SafeguardStream(stream, 784278248);
            if ((deltaMask & (1 << 7)) != 0)
            {
                SafeguardStream(stream, 784278248);
                hasAny = true;
                if (ActionEngine == null)
                    stream.Put((byte)0);
                else
                {
                    stream.Put((byte)1);
                    stream.Put(SyncTypesMap.GetIdFromSyncType(ActionEngine.GetType()));
                    ((IGhost)ActionEngine).Serialize(ref stream, true);
                }

                SafeguardStream(stream, 784278248);
            }
            else
            {
                SafeguardStream(stream, 784278248);
                hasAny |= ((IGhost)ActionEngine)?.Serialize(ref stream, initial) ?? false;
                SafeguardStream(stream, 784278248);
            }

            SafeguardStream(stream, 411153716);
            if ((deltaMask & (1 << 8)) != 0)
            {
                SafeguardStream(stream, 411153716);
                hasAny = true;
                stream.Put(Name);
                SafeguardStream(stream, 411153716);
            }

            SafeguardStream(stream, 137289609);
            if ((deltaMask & (1 << 9)) != 0)
            {
                SafeguardStream(stream, 137289609);
                hasAny = true;
                if (Position != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<Vec2>.Serializer.Serialize(Position, ref stream);
                }
                else
                {
                    stream.Put(false);
                }

                SafeguardStream(stream, 137289609);
            }

            SafeguardStream(stream, 1119698508);
            if ((deltaMask & (1 << 10)) != 0)
            {
                SafeguardStream(stream, 1119698508);
                hasAny = true;
                stream.Put(Speed);
                SafeguardStream(stream, 1119698508);
            }

            SafeguardStream(stream, 778848401);
            if ((deltaMask & (1 << 11)) != 0)
            {
                SafeguardStream(stream, 778848401);
                hasAny = true;
                if (StatsEngine == null)
                    stream.Put((byte)0);
                else
                {
                    stream.Put((byte)1);
                    stream.Put(SyncTypesMap.GetIdFromSyncType(StatsEngine.GetType()));
                    ((IGhost)StatsEngine).Serialize(ref stream, true);
                }

                SafeguardStream(stream, 778848401);
            }
            else
            {
                SafeguardStream(stream, 778848401);
                hasAny |= ((IGhost)StatsEngine)?.Serialize(ref stream, initial) ?? false;
                SafeguardStream(stream, 778848401);
            }

            SafeguardStream(stream, 1498576082);
            if ((deltaMask & (1 << 12)) != 0)
            {
                SafeguardStream(stream, 1498576082);
                hasAny = true;
                if (Inventory == null)
                    stream.Put((byte)0);
                else
                {
                    stream.Put((byte)1);
                    stream.Put(SyncTypesMap.GetIdFromSyncType(Inventory.GetType()));
                    ((IGhost)Inventory).Serialize(ref stream, true);
                }

                SafeguardStream(stream, 1498576082);
            }
            else
            {
                SafeguardStream(stream, 1498576082);
                hasAny |= ((IGhost)Inventory)?.Serialize(ref stream, initial) ?? false;
                SafeguardStream(stream, 1498576082);
            }

            SafeguardStream(stream, 142474984);
            if ((deltaMask & (1 << 13)) != 0)
            {
                SafeguardStream(stream, 142474984);
                hasAny = true;
                if (Def != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<IEntityObjectDef>.Serializer.Serialize(Def, ref stream);
                }
                else
                {
                    stream.Put(false);
                }

                SafeguardStream(stream, 142474984);
            }

            SafeguardStream(stream, 1485461930);
            if ((deltaMask & (1 << 14)) != 0)
            {
                SafeguardStream(stream, 1485461930);
                hasAny = true;
                if (Mortal == null)
                    stream.Put((byte)0);
                else
                {
                    stream.Put((byte)1);
                    stream.Put(SyncTypesMap.GetIdFromSyncType(Mortal.GetType()));
                    ((IGhost)Mortal).Serialize(ref stream, true);
                }

                SafeguardStream(stream, 1485461930);
            }
            else
            {
                SafeguardStream(stream, 1485461930);
                hasAny |= ((IGhost)Mortal)?.Serialize(ref stream, initial) ?? false;
                SafeguardStream(stream, 1485461930);
            }

            SafeguardStream(stream, 1277672612);
            if ((deltaMask & (1 << 15)) != 0)
            {
                SafeguardStream(stream, 1277672612);
                hasAny = true;
                if (FxEngine == null)
                    stream.Put((byte)0);
                else
                {
                    stream.Put((byte)1);
                    stream.Put(SyncTypesMap.GetIdFromSyncType(FxEngine.GetType()));
                    ((IGhost)FxEngine).Serialize(ref stream, true);
                }

                SafeguardStream(stream, 1277672612);
            }
            else
            {
                SafeguardStream(stream, 1277672612);
                hasAny |= ((IGhost)FxEngine)?.Serialize(ref stream, initial) ?? false;
                SafeguardStream(stream, 1277672612);
            }

            return hasAny;
        }

        public override void SetActiveItem(long itemId)
        {
            if (ParentEntity.IsCurrentlyExecuting)
            {
                base.SetActiveItem(itemId);
            }
            else
            {
                CurrentServer.HandleEntityMessage(new CharacterEntitySetActiveItemMessage()
                {EntityId = Id, itemId = itemId});
            }
        }

        public override void ActivateItem()
        {
            if (ParentEntity.IsCurrentlyExecuting)
            {
                base.ActivateItem();
            }
            else
            {
                CurrentServer.HandleEntityMessage(new CharacterEntityActivateItemMessage()
                {EntityId = Id, });
            }
        }

        public override void ReceivePosition(Vec2 newPosition, float newRotation)
        {
            if (ParentEntity.IsCurrentlyExecuting)
            {
                base.ReceivePosition(newPosition, newRotation);
            }
            else
            {
                CurrentServer.HandleEntityMessage(new CharacterEntityReceivePositionMessage()
                {EntityId = Id, newPosition = newPosition, newRotation = newRotation});
            }
        }

        public override void RunImpact(ScriptingContext originalContext, IImpactDef def)
        {
            if (ParentEntity.IsCurrentlyExecuting)
            {
                base.RunImpact(originalContext, def);
            }
            else
            {
                CurrentServer.HandleEntityMessage(new CharacterEntityRunImpactMessage()
                {EntityId = Id, originalContext = originalContext, def = def});
            }
        }

        public override void AddItem(Item item)
        {
            if (ParentEntity.IsCurrentlyExecuting)
            {
                base.AddItem(item);
            }
            else
            {
                CurrentServer.HandleEntityMessage(new CharacterEntityAddItemMessage()
                {EntityId = Id, item = item});
            }
        }
    }

    [GeneratedClass]
    public class CharacterEntitySetActiveItemMessage : EntityMessage
    {
        public override int NetId => 1943217675;
        public long itemId;
        public override void Run(object entity)
        {
            ((CharacterEntity)entity).SetActiveItem(itemId);
        }
    }

    [GeneratedClass]
    public class CharacterEntitySetActiveItemMessageSync : IGhostLikeSerializer
    {
        public object Deserialize(NetDataReader stream)
        {
            var messageToSerialize = new CharacterEntitySetActiveItemMessage();
            {
                var has = stream.GetBool();
                messageToSerialize.EntityId = !has ? default : (EntityId)SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Deserialize(stream);
            }

            {
                messageToSerialize.itemId = stream.GetLong();
            }

            return messageToSerialize;
        }

        public bool Serialize(object objToSerialize, ref NetDataWriter stream)
        {
            var messageToSerialize = (CharacterEntitySetActiveItemMessage)objToSerialize;
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            {
                if (messageToSerialize.EntityId != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Serialize(messageToSerialize.EntityId, ref stream);
                }
                else
                {
                    stream.Put(false);
                }
            }

            {
                stream.Put(messageToSerialize.itemId);
            }

            return true;
        }
    }

    [GeneratedClass]
    public class CharacterEntityActivateItemMessage : EntityMessage
    {
        public override int NetId => 156784015;
        public override void Run(object entity)
        {
            ((CharacterEntity)entity).ActivateItem();
        }
    }

    [GeneratedClass]
    public class CharacterEntityActivateItemMessageSync : IGhostLikeSerializer
    {
        public object Deserialize(NetDataReader stream)
        {
            var messageToSerialize = new CharacterEntityActivateItemMessage();
            {
                var has = stream.GetBool();
                messageToSerialize.EntityId = !has ? default : (EntityId)SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Deserialize(stream);
            }

            return messageToSerialize;
        }

        public bool Serialize(object objToSerialize, ref NetDataWriter stream)
        {
            var messageToSerialize = (CharacterEntityActivateItemMessage)objToSerialize;
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            {
                if (messageToSerialize.EntityId != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Serialize(messageToSerialize.EntityId, ref stream);
                }
                else
                {
                    stream.Put(false);
                }
            }

            return true;
        }
    }

    [GeneratedClass]
    public class CharacterEntityReceivePositionMessage : EntityMessage
    {
        public override int NetId => -992774929;
        public Vec2 newPosition;
        public float newRotation;
        public override void Run(object entity)
        {
            ((CharacterEntity)entity).ReceivePosition(newPosition, newRotation);
        }
    }

    [GeneratedClass]
    public class CharacterEntityReceivePositionMessageSync : IGhostLikeSerializer
    {
        public object Deserialize(NetDataReader stream)
        {
            var messageToSerialize = new CharacterEntityReceivePositionMessage();
            {
                var has = stream.GetBool();
                messageToSerialize.EntityId = !has ? default : (EntityId)SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Deserialize(stream);
            }

            {
                var has = stream.GetBool();
                messageToSerialize.newPosition = !has ? default : (Vec2)SyncTypesMap.FastSerializerGetter<Vec2>.Serializer.Deserialize(stream);
            }

            {
                messageToSerialize.newRotation = stream.GetFloat();
            }

            return messageToSerialize;
        }

        public bool Serialize(object objToSerialize, ref NetDataWriter stream)
        {
            var messageToSerialize = (CharacterEntityReceivePositionMessage)objToSerialize;
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            {
                if (messageToSerialize.EntityId != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Serialize(messageToSerialize.EntityId, ref stream);
                }
                else
                {
                    stream.Put(false);
                }
            }

            {
                if (messageToSerialize.newPosition != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<Vec2>.Serializer.Serialize(messageToSerialize.newPosition, ref stream);
                }
                else
                {
                    stream.Put(false);
                }
            }

            {
                stream.Put(messageToSerialize.newRotation);
            }

            return true;
        }
    }

    [GeneratedClass]
    public class CharacterEntityRunImpactMessage : EntityMessage
    {
        public override int NetId => -437846284;
        public ScriptingContext originalContext;
        public IImpactDef def;
        public override void Run(object entity)
        {
            ((CharacterEntity)entity).RunImpact(originalContext, def);
        }
    }

    [GeneratedClass]
    public class CharacterEntityRunImpactMessageSync : IGhostLikeSerializer
    {
        public object Deserialize(NetDataReader stream)
        {
            var messageToSerialize = new CharacterEntityRunImpactMessage();
            {
                var has = stream.GetBool();
                messageToSerialize.EntityId = !has ? default : (EntityId)SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Deserialize(stream);
            }

            {
                var has = stream.GetBool();
                messageToSerialize.originalContext = !has ? default : (ScriptingContext)SyncTypesMap.FastSerializerGetter<ScriptingContext>.Serializer.Deserialize(stream);
            }

            {
                var has = stream.GetBool();
                messageToSerialize.def = !has ? default : (IImpactDef)SyncTypesMap.FastSerializerGetter<IImpactDef>.Serializer.Deserialize(stream);
            }

            return messageToSerialize;
        }

        public bool Serialize(object objToSerialize, ref NetDataWriter stream)
        {
            var messageToSerialize = (CharacterEntityRunImpactMessage)objToSerialize;
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            {
                if (messageToSerialize.EntityId != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Serialize(messageToSerialize.EntityId, ref stream);
                }
                else
                {
                    stream.Put(false);
                }
            }

            {
                if (messageToSerialize.originalContext != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<ScriptingContext>.Serializer.Serialize(messageToSerialize.originalContext, ref stream);
                }
                else
                {
                    stream.Put(false);
                }
            }

            {
                if (messageToSerialize.def != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<IImpactDef>.Serializer.Serialize(messageToSerialize.def, ref stream);
                }
                else
                {
                    stream.Put(false);
                }
            }

            return true;
        }
    }

    [GeneratedClass]
    public class CharacterEntityAddItemMessage : EntityMessage
    {
        public override int NetId => -40536695;
        public Item item;
        public override void Run(object entity)
        {
            ((CharacterEntity)entity).AddItem(item);
        }
    }

    [GeneratedClass]
    public class CharacterEntityAddItemMessageSync : IGhostLikeSerializer
    {
        public object Deserialize(NetDataReader stream)
        {
            var messageToSerialize = new CharacterEntityAddItemMessage();
            {
                var has = stream.GetBool();
                messageToSerialize.EntityId = !has ? default : (EntityId)SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Deserialize(stream);
            }

            {
                var nullOrNot = stream.GetByte();
                if (nullOrNot == 0)
                {
                    messageToSerialize.item = null;
                }
                else
                {
                    var newVal = Activator.CreateInstance(SyncTypesMap.GetSyncTypeFromId(stream.GetInt()));
                    ((IGhost)newVal).Deserialize(stream);
                    messageToSerialize.item = (Item)newVal;
                }
            }

            return messageToSerialize;
        }

        public bool Serialize(object objToSerialize, ref NetDataWriter stream)
        {
            var messageToSerialize = (CharacterEntityAddItemMessage)objToSerialize;
            if (stream == null)
                stream = new NetDataWriter(true, 5);
            {
                if (messageToSerialize.EntityId != default)
                {
                    stream.Put(true);
                    SyncTypesMap.FastSerializerGetter<EntityId>.Serializer.Serialize(messageToSerialize.EntityId, ref stream);
                }
                else
                {
                    stream.Put(false);
                }
            }

            {
                if (messageToSerialize.item == null)
                    stream.Put((byte)0);
                else
                {
                    stream.Put((byte)1);
                    stream.Put(SyncTypesMap.GetIdFromSyncType(messageToSerialize.item.GetType()));
                    ((IGhost)messageToSerialize.item).Serialize(ref stream, true);
                }
            }

            return true;
        }
    }
}